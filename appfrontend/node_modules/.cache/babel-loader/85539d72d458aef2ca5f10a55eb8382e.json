{"ast":null,"code":"var _jsxFileName = \"G:\\\\blockchain-scm\\\\appfrontend\\\\src\\\\components\\\\InitializedContent.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport HomeWrapper from \"./wrapper/HomeWrapper\";\nimport Register from \"./Register\";\nimport ConfirmRegistration from \"./ConfirmRegistration\";\nimport Header from \"./static/Header\";\nimport Footer from \"./static/Footer\";\nimport { CircularPageLoader } from \"./static/CircularPageLoader\";\nimport NotFound from \"./static/NotFound\";\nimport NewUser from \"./static/NewUser\";\nimport RegistrationSuccess from \"./static/RegistrationSuccess\";\nimport RegistrationFailure from \"./static/RegistrationFailure\";\nimport { USER_TYPES } from \"./enum/UsersEnum\";\nimport \"../css/App.css\";\n\n/**\r\n * Includes conditional application routing and user registration logic after app initialization.\r\n * \r\n * @author syuki\r\n */\nexport const InitializedContent = _ref => {\n  let {\n    drizzle,\n    drizzleState\n  } = _ref;\n  const [isAuth, setIsAuth] = useState();\n  const [userType, setUserType] = useState();\n  const contract = drizzle.contracts.SupplyChainLifecycle;\n\n  //If the user is registered as at least one role, they're allowed access to the application content.\n  useEffect(() => {\n    let retailerResult = null;\n    let producerResult = null;\n    contract.methods.isRetailer().call().then(receipt => {\n      console.log(receipt);\n      retailerResult = receipt;\n      if (receipt) {\n        setUserType(USER_TYPES[2]);\n      }\n    }).catch(error => {\n      console.log(error);\n      retailerResult = false;\n    });\n    contract.methods.isProducer().call().then(receipt => {\n      console.log(receipt);\n      producerResult = receipt;\n      if (receipt) {\n        setUserType(USER_TYPES[0]);\n      }\n    }).catch(error => {\n      console.log(error);\n      producerResult = false;\n    });\n    contract.methods.isDistributor().call().then(receipt => {\n      console.log(receipt);\n      if (receipt) {\n        setUserType(USER_TYPES[1]);\n      }\n      setIsAuth(retailerResult || producerResult || receipt);\n    }).catch(error => {\n      console.log(error);\n      setIsAuth(retailerResult || producerResult || false);\n    });\n  }, []);\n  function updateIsAuth(newIsAuth) {\n    setIsAuth(newIsAuth);\n  }\n  function updateUserType(newUserType) {\n    setUserType(newUserType);\n  }\n\n  //Registered users are redirected to the home page, un-registered users go to the sign-up page.\n  if (isAuth != undefined) {\n    return /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      isAuthenticated: isAuth,\n      userType: userType,\n      drizzle: drizzle,\n      drizzleState: drizzleState,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Routes, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/new-user\",\n      element: /*#__PURE__*/React.createElement(NewUser, {\n        isAuthenticated: isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 64\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/register\",\n      element: /*#__PURE__*/React.createElement(Register, {\n        drizzle: drizzle,\n        drizzleState: drizzleState,\n        isAuthenticated: isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 64\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/confirm-registration\",\n      element: /*#__PURE__*/React.createElement(ConfirmRegistration, {\n        drizzle: drizzle,\n        drizzleState: drizzleState,\n        isAuthenticated: isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 76\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/registration-success\",\n      element: /*#__PURE__*/React.createElement(RegistrationSuccess, {\n        isAuthenticated: isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 76\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/registration-failure\",\n      element: /*#__PURE__*/React.createElement(RegistrationFailure, {\n        isAuthenticated: isAuth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 76\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      element: /*#__PURE__*/React.createElement(HomeWrapper, {\n        drizzle: drizzle,\n        drizzleState: drizzleState,\n        isAuthenticated: isAuth,\n        userType: userType,\n        updateAuth: updateIsAuth,\n        updateUserType: updateUserType,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 56\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"*\",\n      element: /*#__PURE__*/React.createElement(NotFound, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 50\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Footer, {\n      isAuthenticated: isAuth,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }));\n  } else {\n    return /*#__PURE__*/React.createElement(CircularPageLoader, {\n      open: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    });\n  }\n};","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","HomeWrapper","Register","ConfirmRegistration","Header","Footer","CircularPageLoader","NotFound","NewUser","RegistrationSuccess","RegistrationFailure","USER_TYPES","InitializedContent","drizzle","drizzleState","isAuth","setIsAuth","userType","setUserType","contract","contracts","SupplyChainLifecycle","retailerResult","producerResult","methods","isRetailer","call","then","receipt","console","log","catch","error","isProducer","isDistributor","updateIsAuth","newIsAuth","updateUserType","newUserType","undefined"],"sources":["G:/blockchain-scm/appfrontend/src/components/InitializedContent.js"],"sourcesContent":["\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\r\n\r\nimport HomeWrapper from \"./wrapper/HomeWrapper\";\r\n\r\nimport Register from \"./Register\";\r\nimport ConfirmRegistration from \"./ConfirmRegistration\";\r\n\r\nimport Header from \"./static/Header\";\r\nimport Footer from \"./static/Footer\";\r\nimport { CircularPageLoader } from \"./static/CircularPageLoader\";\r\nimport NotFound from \"./static/NotFound\";\r\nimport NewUser from \"./static/NewUser\";\r\nimport RegistrationSuccess from \"./static/RegistrationSuccess\";\r\nimport RegistrationFailure from \"./static/RegistrationFailure\";\r\n\r\nimport { USER_TYPES } from \"./enum/UsersEnum\";\r\n\r\nimport \"../css/App.css\";\r\n\r\n/**\r\n * Includes conditional application routing and user registration logic after app initialization.\r\n * \r\n * @author syuki\r\n */\r\nexport const InitializedContent = ({drizzle, drizzleState}) => {\r\n\r\n    const [isAuth, setIsAuth] = useState();\r\n    const [userType, setUserType] = useState();\r\n\r\n    const contract = drizzle.contracts.SupplyChainLifecycle;\r\n\r\n    //If the user is registered as at least one role, they're allowed access to the application content.\r\n    useEffect(() => {\r\n        let retailerResult = null;\r\n        let producerResult = null;\r\n\r\n        contract.methods.isRetailer().call().then((receipt) => {\r\n                    console.log(receipt);\r\n                    retailerResult = receipt;\r\n                    if(receipt){\r\n                        setUserType(USER_TYPES[2]);\r\n                    }\r\n                }).catch((error) => {\r\n                    console.log(error);\r\n                    retailerResult = false;\r\n                });\r\n        contract.methods.isProducer().call().then((receipt) => {\r\n                    console.log(receipt);\r\n                    producerResult = receipt;\r\n                    if(receipt){\r\n                        setUserType(USER_TYPES[0]);\r\n                    }\r\n                }).catch((error) => {\r\n                    console.log(error);\r\n                    producerResult = false;\r\n                });\r\n        contract.methods.isDistributor().call().then((receipt) => {\r\n                    console.log(receipt);\r\n                    if(receipt){\r\n                        setUserType(USER_TYPES[1]);\r\n                    }\r\n                    setIsAuth(retailerResult || producerResult || receipt);\r\n                }).catch((error) => {\r\n                    console.log(error);\r\n                    setIsAuth(retailerResult || producerResult || false);\r\n                });\r\n    }, []);\r\n\r\n    function updateIsAuth(newIsAuth){\r\n        setIsAuth(newIsAuth);\r\n    }\r\n\r\n    function updateUserType(newUserType){\r\n        setUserType(newUserType);\r\n    }\r\n\r\n    //Registered users are redirected to the home page, un-registered users go to the sign-up page.\r\n    if(isAuth != undefined) {\r\n        return (\r\n            <Router>\r\n                <Header isAuthenticated={isAuth} userType={userType} drizzle={drizzle} drizzleState={drizzleState} /> \r\n                <div>\r\n                    <Routes>\r\n                        {/* Registered users are redirected to the home page, un-registered users go to the register/sign-up page. */}\r\n                        <Route exact path=\"/new-user\" element={<NewUser isAuthenticated={isAuth} />} /> \r\n                        <Route exact path=\"/register\" element={<Register drizzle={drizzle} drizzleState={drizzleState} isAuthenticated={isAuth} />} /> \r\n                        <Route exact path=\"/confirm-registration\" element={<ConfirmRegistration drizzle={drizzle} drizzleState={drizzleState} isAuthenticated={isAuth} />} />   \r\n                        <Route exact path=\"/registration-success\" element={<RegistrationSuccess isAuthenticated={isAuth} />} />   \r\n                        <Route exact path=\"/registration-failure\" element={<RegistrationFailure isAuthenticated={isAuth} />} />   \r\n                        <Route exact path=\"/\" element={<HomeWrapper drizzle={drizzle} drizzleState={drizzleState} isAuthenticated={isAuth} userType={userType} updateAuth={updateIsAuth} updateUserType={updateUserType} />} /> \r\n                        <Route path=\"*\" element={<NotFound />} />\r\n                    </Routes>\r\n                </div>\r\n                <Footer isAuthenticated={isAuth} />\r\n            </Router>\r\n        );\r\n    } else {\r\n        return (<CircularPageLoader open = \"true\" />);\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}